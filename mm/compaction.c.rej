--- mm/compaction.c
+++ mm/compaction.c
@@ -2240,12 +2236,10 @@ compact_zone(struct compact_control *cc, struct capture_control *capc)
 				block_start_pfn(cc->migrate_pfn, cc->order);
 
 			if (last_migrated_pfn < current_block_start) {
-				cpu = get_cpu_light();
-				local_lock_irq(swapvec_lock);
+				cpu = get_cpu();
 				lru_add_drain_cpu(cpu);
-				local_unlock_irq(swapvec_lock);
 				drain_local_pages(cc->zone);
-				put_cpu_light();
+				put_cpu();
 				/* No more flushing until we migrate again */
 				last_migrated_pfn = 0;
 			}
